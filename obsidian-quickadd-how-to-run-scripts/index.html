<!doctype html><html lang=ru-ru dir=ltr><head><meta property="og:title" content="Obsidian QuickAdd - как запускать скрипты"><meta property="og:description" content="Плагин для [[./obsidian|Обсидиана]] QuickAdd позволяет автоматически создавать заметки, но ещё его можно использовать в качестве запускалки скриптов.
Javascript #   Создать файл в формате js и сохранить его в любом месте хранилища. В файле написать код:  module.exports = async (params) => {   /Мой код. В нём можно использовать API Обсидиана и самого плагина./  }  В настройках QuickAdd создать макрос и в настройках макроса выбрать созданный скрипт."><meta property="og:type" content="article"><meta property="og:url" content="https://anareaty.github.io/pf-edit/obsidian-quickadd-how-to-run-scripts/"><meta property="article:section" content><meta property="article:published_time" content="2023-05-26T00:00:00+04:00"><meta property="article:modified_time" content="2024-01-23T21:22:54+04:00"><meta property="og:site_name" content="Paperless Forest"><title>Obsidian QuickAdd - как запускать скрипты | Paperless Forest</title><link rel=manifest href=/pf-edit/manifest.json><link rel=icon href=/pf-edit/favicon.png type=image/x-icon><link rel=stylesheet href=/pf-edit/book.min.7fb473bade29069e68890412fd3e98d3ed0d7afeaef7f229b7bf6439d7a38e00.css integrity="sha256-f7Rzut4pBp5oiQQS/T6Y0+0Nev6u9/Ipt79kOdejjgA=" crossorigin=anonymous><meta charset=utf-8><meta name=description content="Плагин для [[./obsidian|Обсидиана]] QuickAdd позволяет автоматически создавать заметки, но ещё его можно использовать в качестве запускалки скриптов.
Javascript #   Создать файл в формате js и сохранить его в любом месте хранилища. В файле написать код:  module.exports = async (params) => {   /Мой код. В нём можно использовать API Обсидиана и самого плагина./  }  В настройках QuickAdd создать макрос и в настройках макроса выбрать созданный скрипт."><title>Obsidian QuickAdd - как запускать скрипты</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://anareaty.github.io/pf-edit//favicon.png><link href=https://anareaty.github.io/pf-edit/styles.7297995f6eb78254153de0ea04fc36b5.min.css rel=stylesheet><link href=https://anareaty.github.io/pf-edit/quartz/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://anareaty.github.io/pf-edit/quartz/js/darkmode.72d669e9391dc1480d52f8746bff3131.min.js></script>
<script src=https://anareaty.github.io/pf-edit/quartz/js/util.c69e233dc1cc331a30b0f670e657b425.min.js></script>
<script async src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script async src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://anareaty.github.io/pf-edit/myscripts/popover.b468944f699466f47c4cb763c48779aa.min.js></script>
<script defer src=https://anareaty.github.io/pf-edit/quartz/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://anareaty.github.io/pf-edit/quartz/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://anareaty.github.io/pf-edit/quartz/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://anareaty.github.io/pf-edit/",fetchData=Promise.all([fetch("https://anareaty.github.io/pf-edit/indices/linkIndex.0b59561cead2f9d5445c8b8603a685ce.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://anareaty.github.io/pf-edit/indices/contentIndex.7faf081b7a52b38d41dd82d91fd3a743.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,o=t==n;addCopyButtons(),addCollapsibleCallouts(),initPopover("https://anareaty.github.io/pf-edit",!0);var s=document.getElementsByClassName("mermaid");s.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script>window.Million={navigate:e=>window.location.href=e,prefetch:()=>{}},window.addEventListener("DOMContentLoaded",()=>{init(),render()})</script><meta http-equiv=permissions-policy content="interest-cohort=()"></head><body dir=ltr><header class=bare-header><div class=menu-control-wrapper><label for=menu-control><img src=/pf-edit/svg/menu.svg class=book-icon alt=Menu></label></div></header><div id=search-container><div id=search-space><input value=test autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://anareaty.github.io/pf-edit/quartz/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script>
<input type=checkbox class="hidden toggle" id=menu-control><main class=main-container><aside class=book-menu><div class=book-menu-content><div class=profile-image><a href=/><img src=/images/avatar.jpg alt="profile image"></a></div><div class=icons-bar><div class=icon-bar-item><a href=/about title="Обо мне"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.5228.0 10 4.47715 10 10 0 5.5228-4.4772 10-10 10C6.47715 22 2 17.5228 2 12 2 6.47715 6.47715 2 12 2zM12.1597 16C10.1243 16 8.29182 16.8687 7.01276 18.2556 8.38039 19.3474 10.114 20 12 20c1.9695.0 3.7727-.7117 5.1666-1.8919C15.8956 16.8074 14.1219 16 12.1597 16zM12 4C7.58172 4 4 7.58172 4 12c0 1.8106.6015 3.4807 1.61557 4.8214C7.25639 15.0841 9.58144 14 12.1597 14c2.4844.0 4.7336 1.0066 6.3621 2.6342C19.4526 15.3267 20 13.7273 20 12c0-4.41828-3.5817-8-8-8zm0 1c2.2091.0 4 1.79086 4 4 0 2.2091-1.7909 4-4 4-2.20914.0-4-1.7909-4-4 0-2.20914 1.79086-4 4-4zm0 2c-1.1046.0-2 .89543-2 2 0 1.1046.8954 2 2 2s2-.8954 2-2c0-1.10457-.8954-2-2-2z" fill="rgba(64,64,64,1)"/></svg></a></div><div class=icon-bar-item><a href=https://github.com/anareaty/ target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.001 2C6.47598 2 2.00098 6.475 2.00098 12c0 4.425 2.8625 8.1625 6.8375 9.4875C9.33848 21.575 9.52598 21.275 9.52598 21.0125 9.52598 20.775 9.51348 19.9875 9.51348 19.15 7.00098 19.6125 6.35098 18.5375 6.15098 17.975 6.03848 17.6875 5.55098 16.8 5.12598 16.5625 4.77598 16.375 4.27598 15.9125 5.11348 15.9 5.90098 15.8875 6.46348 16.625 6.65098 16.925 7.55098 18.4375 8.98848 18.0125 9.56348 17.75 9.65098 17.1 9.91348 16.6625 10.201 16.4125c-2.22502-.25-4.55002-1.1125-4.55002-4.9375.0-1.0875.3875-1.9875 1.025-2.6875C6.57598 8.5375 6.22598 7.5125 6.77598 6.1375c0 0 .8375-.2625 2.75 1.025C10.326 6.9375 11.176 6.825 12.026 6.825S13.726 6.9375 14.526 7.1625c1.9125-1.3 2.75-1.025 2.75-1.025C17.826 7.5125 17.476 8.5375 17.376 8.7875 18.0135 9.4875 18.401 10.375 18.401 11.475c0 3.8375-2.3375 4.6875-4.5625 4.9375C14.201 16.725 14.5135 17.325 14.5135 18.2625 14.5135 19.6 14.501 20.675 14.501 21.0125 14.501 21.275 14.6885 21.5875 15.1885 21.4875 19.259 20.1133 21.9999 16.2963 22.001 12c0-5.525-4.475-10-10-10z" fill="rgba(64,64,64,1)"/></svg></a></div><div class=icon-bar-item><a href=https://t.me/anareaty target=_blank title=Telegram rel=me><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.001 20c4.4183.0 8-3.5817 8-8 0-4.41828-3.5817-8-8-8-4.4183.0-8.00002 3.58172-8.00002 8 0 4.4183 3.58172 8 8.00002 8zm0 2C6.47813 22 2.00098 17.5228 2.00098 12c0-5.52285 4.47715-10 10.00002-10 5.5228.0 10 4.47715 10 10 0 5.5228-4.4772 10-10 10zM8.89113 13.1708l-2.49805-.7797C5.85317 12.2255 5.84996 11.854 6.51397 11.5871L16.247 7.82754C16.8115 7.59644 17.1325 7.88842 16.9495 8.61641L15.2917 16.4377C15.1763 16.9941 14.8407 17.1266 14.3759 16.8698L11.825 14.9823l-1.1889 1.1474C10.5139 16.2476 10.4145 16.3489 10.2273 16.3743 10.04 16.3996 9.88564 16.3442 9.77337 16.0337L8.90378 13.1628 8.89113 13.1708z" fill="rgba(64,64,64,1)"/></svg></a></div><div class="menu-search icon-bar-item"><div id=search-icon class=quartz-search><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div></div><div class=icon-bar-item><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></div></div><nav><ul><li><a href=/pf-edit/>Главная</a></li></ul><ul><li><a href=/pf-edit/blog/>Блог2</a><ul></ul></li><li><input type=checkbox id=section-ca254659fa7fc00c154fe98d1a9fc618 class=toggle>
<label for=section-ca254659fa7fc00c154fe98d1a9fc618 class=flex><a href=/pf-edit/obsidian/ class=book-collapse-toggle>Obsidian</a></label><ul><li><a href=/pf-edit/Canvas-style-menu-settings/>Пресет настроек для плагина Canvas Style Menu</a><ul></ul></li><li><a href=/pf-edit/sidebar-images/>Css для картинок в сайдбаре</a><ul></ul></li><li><a href=/pf-edit/custom-checkboxes/>Кастомные чекбоксы в Obsidian</a><ul></ul></li><li><a href=/pf-edit/obsidian-quickadd-how-to-run-scripts/ class=active>Obsidian QuickAdd - как запускать скрипты</a><ul></ul></li><li><a href=/pf-edit/how-to-reuse-dataviewjs-code/>Как переиспользовать код с помощью dataviewjs</a><ul></ul></li></ul></li><li><a href=/pf-edit/pocketbook-collection-manager/>Менеджер коллекций для Покетбука</a><ul></ul></li><li><a href=/pf-edit/three-act-structure/>Трёхактная структура</a><ul></ul></li><li><a href=/pf-edit/sync-syncthing-without-internet/>Синхронизация через Syncthing без интернета</a><ul></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class="book-page container with-toc"><article class=markdown><h1 class=title>Obsidian QuickAdd - как запускать скрипты</h1><div class=article-date>26 мая 2023</div><div><a href=/pf-edit/tags/Obsidian/ class=tag>#Obsidian</a>
<a href=/pf-edit/tags/QuickAdd/ class=tag>#QuickAdd</a></div><div class=content><p>Плагин для <a id=link-4f893d49a7cb3d19425760545f668148 href=/pf-edit/obsidian rel=noopener class=internal-link data-src=/pf-edit/obsidian>Обсидиана</a> QuickAdd позволяет автоматически создавать заметки, но ещё его можно использовать в качестве запускалки скриптов.</p><h2 id=javascript>Javascript
<a class=anchor href=#javascript>#</a></h2><ul><li>Создать файл в формате js и сохранить его в любом месте хранилища.</li><li>В файле написать код:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span>  <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>params</span>) =&gt; {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>  <span style=color:#e6db74>/Мой код. В нём можно использовать API Обсидиана и самого плагина./</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>В настройках QuickAdd создать макрос и в настройках макроса выбрать созданный скрипт.</li><li>Не забыть отметить значок молнии рядом с названием макроса, чтобы активировалась команда. Потом эту команду можно подвязать на хоткей или добавить кнопочку с помощью плагина Commander.</li></ul><h2 id=другие-языки-и-прочие-файлы>Другие языки и прочие файлы
<a class=anchor href=#%d0%b4%d1%80%d1%83%d0%b3%d0%b8%d0%b5-%d1%8f%d0%b7%d1%8b%d0%ba%d0%b8-%d0%b8-%d0%bf%d1%80%d0%be%d1%87%d0%b8%d0%b5-%d1%84%d0%b0%d0%b9%d0%bb%d1%8b>#</a></h2><p>QuickAdd не может сам исполнять код на других языках, но может открывать файлы в программе по умолчанию, что позволяет нам запускать, например, shell-скрипты или любые другие файлы, для которых у нас установлена соответствующая программа.</p><ul><li>Нужно добавить файл, который мы хотим запустить, в хранилище. Например, это может быть bash-файл, который коммитит и пушит заметки на гитхаб.</li><li>Создать js-скрипт и макрос по инструкции выше.</li><li>В js-файле написать код:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span>  <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>params</span>) =&gt; {
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>scriptPath</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;\\scripts\\myFile.sh&#34;</span> <span style=color:#f92672>/</span><span style=color:#a6e22e>Здесь</span> <span style=color:#a6e22e>вместо</span> <span style=color:#a6e22e>моего</span> <span style=color:#a6e22e>примера</span> <span style=color:#a6e22e>надо</span> <span style=color:#a6e22e>указать</span> <span style=color:#a6e22e>путь</span> <span style=color:#a6e22e>к</span> <span style=color:#a6e22e>файлу</span>, <span style=color:#a6e22e>который</span> <span style=color:#a6e22e>мы</span> <span style=color:#a6e22e>хотим</span> <span style=color:#a6e22e>запустить</span>. <span style=color:#a6e22e>Путь</span> <span style=color:#a6e22e>указывается</span> <span style=color:#a6e22e>относительно</span> <span style=color:#a6e22e>хранилища</span>. <span style=color:#a6e22e>Обязательно</span> <span style=color:#a6e22e>надо</span> <span style=color:#a6e22e>эскейпить</span> <span style=color:#a6e22e>обратные</span> <span style=color:#a6e22e>слэши</span><span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cmd</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>vault</span>.<span style=color:#a6e22e>adapter</span>.<span style=color:#a6e22e>basePath</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>scriptPath</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>promisify</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;util&#39;</span>); 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>exec</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>promisify</span>(<span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;child_process&#39;</span>).<span style=color:#a6e22e>exec</span>); 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>exec</span>(<span style=color:#a6e22e>cmd</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Этот скрипт запускает файлы на Windows. В других системах код может отличаться, в частности, путь будет записываться прямыми слэшами, но может, есть и другие нюансы, не знаю. Поскольку мы не прописываем напрямую путь к хранилищу, а находим его с помощью кода, этот скрипт может работать на разных устройствах.</p><h2 id=запрашивать-подтверждение-перед-выполнением-скрипта>Запрашивать подтверждение перед выполнением скрипта
<a class=anchor href=#%d0%b7%d0%b0%d0%bf%d1%80%d0%b0%d1%88%d0%b8%d0%b2%d0%b0%d1%82%d1%8c-%d0%bf%d0%be%d0%b4%d1%82%d0%b2%d0%b5%d1%80%d0%b6%d0%b4%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bf%d0%b5%d1%80%d0%b5%d0%b4-%d0%b2%d1%8b%d0%bf%d0%be%d0%bb%d0%bd%d0%b5%d0%bd%d0%b8%d0%b5%d0%bc-%d1%81%d0%ba%d1%80%d0%b8%d0%bf%d1%82%d0%b0>#</a></h2><p>Это может быть полезно, если скрипт делает что-то опасное, или если мы используем автоматизированный запуск скрипта, но иногда хотим от него отказаться. Например, у меня настроен скрипт, который делает пул с гитхаба каждый раз при запуске программы, но иногда я закрываю и открываю Обсидиан несколько раз в течение рабочего дня и не вижу смысла каждый раз пулить.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span>  <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>params</span>) =&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>quickAddApi</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>yesNoPrompt</span> } } <span style=color:#f92672>=</span> <span style=color:#a6e22e>params</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>runScript</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>yesNoPrompt</span>(<span style=color:#e6db74>&#34;Выполнить скрипт?&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>runScript</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>/Здесь пишем код, который будет выполняться при подтверждении/</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=вызывать-системные-команды-обсидиана-изнутри-скрипта>Вызывать системные команды Обсидиана изнутри скрипта
<a class=anchor href=#%d0%b2%d1%8b%d0%b7%d1%8b%d0%b2%d0%b0%d1%82%d1%8c-%d1%81%d0%b8%d1%81%d1%82%d0%b5%d0%bc%d0%bd%d1%8b%d0%b5-%d0%ba%d0%be%d0%bc%d0%b0%d0%bd%d0%b4%d1%8b-%d0%be%d0%b1%d1%81%d0%b8%d0%b4%d0%b8%d0%b0%d0%bd%d0%b0-%d0%b8%d0%b7%d0%bd%d1%83%d1%82%d1%80%d0%b8-%d1%81%d0%ba%d1%80%d0%b8%d0%bf%d1%82%d0%b0>#</a></h2><p>Вообще-то QuickAdd может сам вызывать команды через макрос, безо всяких скриптов. Но иногда нам может понадобиться обернуть команду в какой-то код, и для этого нам поможет такой скрипт:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span>  <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>params</span>) =&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>/Какой-то код/</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>commands</span>.<span style=color:#a6e22e>executeCommandById</span>(<span style=color:#a6e22e>id</span>) <span style=color:#f92672>/</span><span style=color:#a6e22e>где</span> <span style=color:#a6e22e>id</span> <span style=color:#960050;background-color:#1e0010>—</span> <span style=color:#a6e22e>это</span> <span style=color:#a6e22e>id</span> <span style=color:#a6e22e>конкретной</span> <span style=color:#a6e22e>команды</span><span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#e6db74>/Какой-то код/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Чтобы узнать id команды, можно открыть консоль и написать код:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>commands</span>.<span style=color:#a6e22e>commands</span>)
</span></span></code></pre></div><p>Это выведет список всех доступных на данный момент команд, включая команды из установленных плагинов, где указаны их названия и id.</p><h2 id=пример--скрипты-для-обновления-вкладок>Пример — скрипты для обновления вкладок
<a class=anchor href=#%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80--%d1%81%d0%ba%d1%80%d0%b8%d0%bf%d1%82%d1%8b-%d0%b4%d0%bb%d1%8f-%d0%be%d0%b1%d0%bd%d0%be%d0%b2%d0%bb%d0%b5%d0%bd%d0%b8%d1%8f-%d0%b2%d0%ba%d0%bb%d0%b0%d0%b4%d0%be%d0%ba>#</a></h2><p>В качестве бонуса — парочка маленьких полезных скриптов, который могут пригодиться.</p><p>Скрипт, чтобы обновить текущую активную вкладку:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span>  <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>params</span>) =&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>workspace</span>.<span style=color:#a6e22e>activeLeaf</span>.<span style=color:#a6e22e>rebuildView</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Скрипт, чтобы обновить все открытые вкладки:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span>  <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>params</span>) =&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>workspace</span>.<span style=color:#a6e22e>rightSplit</span>.<span style=color:#a6e22e>children</span>.<span style=color:#a6e22e>forEach</span>(<span style=color:#a6e22e>pane</span> =&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pane</span>.<span style=color:#a6e22e>children</span>[<span style=color:#a6e22e>pane</span>.<span style=color:#a6e22e>currentTab</span>].<span style=color:#a6e22e>rebuildView</span>()
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>workspace</span>.<span style=color:#a6e22e>leftSplit</span>.<span style=color:#a6e22e>children</span>.<span style=color:#a6e22e>forEach</span>(<span style=color:#a6e22e>pane</span> =&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pane</span>.<span style=color:#a6e22e>children</span>[<span style=color:#a6e22e>pane</span>.<span style=color:#a6e22e>currentTab</span>].<span style=color:#a6e22e>rebuildView</span>()
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>workspace</span>.<span style=color:#a6e22e>rootSplit</span>.<span style=color:#a6e22e>children</span>.<span style=color:#a6e22e>forEach</span>(<span style=color:#a6e22e>pane</span> =&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pane</span>.<span style=color:#a6e22e>children</span>[<span style=color:#a6e22e>pane</span>.<span style=color:#a6e22e>currentTab</span>].<span style=color:#a6e22e>rebuildView</span>()
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Обновление вкладок может быть полезно при использовании некоторых плагинов, например Dataview и Supercharged Links, потому что они не всегда обновляют вид в реальном времени.</p></div><hr><div class=bl-section></div><p><a name=giscus></a></p><script src=https://giscus.app/client.js data-repo=anareaty/paperless-forest data-repo-id=R_kgDOKa1X3w data-category=General data-category-id=DIC_kwDOKa1X384CZz3C data-mapping=title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=https://paperless-forest.ru/giscus/giscus-theme.css data-lang=ru data-loading=lazy crossorigin=anonymous async></script></article><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#javascript>Javascript</a></li><li><a href=#другие-языки-и-прочие-файлы>Другие языки и прочие файлы</a></li><li><a href=#запрашивать-подтверждение-перед-выполнением-скрипта>Запрашивать подтверждение перед выполнением скрипта</a></li><li><a href=#вызывать-системные-команды-обсидиана-изнутри-скрипта>Вызывать системные команды Обсидиана изнутри скрипта</a></li><li><a href=#пример--скрипты-для-обновления-вкладок>Пример — скрипты для обновления вкладок</a></li></ul></li></ul></nav></div></aside></main></body></html>